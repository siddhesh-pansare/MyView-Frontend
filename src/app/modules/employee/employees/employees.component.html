
<div class="page-sub-header">
    <div class="page-heading">
    <img class="arrow-back-icon" alt="" src="assets/employees/Arrow back.svg">
    <div class="page-heading1">All Employees</div>
    </div>
    <div class="line"></div>
    <img class="btn-all-employees-icon" alt="" src="assets/employees/btn_all_employees.png">
</div>

<div class="parent-container">
<div class="container">
  <div class="row align-items-center">
    <div class="col-sm-6">
      <div class="searchCandidate">
        <div class="search-container">
          <input
            type="text"
            [(ngModel)]="searchTerm"
            (input)="applyFilter()"
            placeholder="Search a Candidate"
            class="search-input"
          />
        </div>

        <img class="icon" alt="" src="assets/employees/3077325 1.png" >
        
        
      
        
      </div>
      <div *ngIf="showSearchInput"  style="margin-top:-50px;margin-left:375px;width: 300px;">
        <mat-select class="form-select custom-dropdown d-flex flex-column align-items-center" [placeholder]="'Headers'" *ngIf="showSearchInput" 
      [multiple]="false">
  
      <span class="column-name" (click)="toggleAllColumnVisibility()">
        <mat-option>
          <label class="checkbox-label">
            <input class="form-check-input me-2" type="checkbox" [checked]="areAllColumnsVisible()"
              (change)="toggleAllColumnVisibility()" />
  
            <span class="checkmark"></span>
            Select All
          </label>
        </mat-option>
      </span>
  
      <mat-selection-list (click)="$event.stopPropagation()"
        *ngFor="let column of displayedColumns; let i = index">
        <span class="column-name" (click)="toggleColumnVisibility(i)">
          <mat-option>
            <label class="checkbox-label">
              <input class="form-check-input me-2" type="checkbox"
                [checked]="initiallyCheckedColumns.includes(column)" (change)="toggleColumnVisibility(i)" />
              <span class="checkmark"></span>
              {{ convertToTitleCase(column) }}
            </label>
          </mat-option>
        </span>
      </mat-selection-list>
  
    </mat-select>
    <span class="selected-columns d-flex align-items-center" *ngIf="showSearchInput" style="margin-left:20px">{{ checkedColumnsCount }} of {{ displayedColumns.length
    }} columns
    selected</span>
    </div>
    
  
  
 

    </div>
    
    
   

    <div class="col-sm-6 text-right">
      <div class="filterExport">
       <a href="#"><img class="icon1" alt="" src="assets/employees/export1.png" (click)="exportToExcel()"></a>
       <div class="filter-columns">
        
        <a  (click)="toggleSearchInput()" style="cursor:pointer">
          <img class="icon2" alt="" src="assets/employees/566737 1.png" matTooltip="filter header" >
        </a>
      </div>
      
       
      
      </div>
    </div>
  </div>
</div>
<div class="line-div-container">
<div class="line-div">
</div>
</div>

  



  <div class="table-responsive rounded">
  
    
    <div class="search-option-container">
      
      
     
    </div>
    
    
    <!-- <div class="search-options">
      <div class="search-options" >
        <div class="search-option">
          <ng-container *ngFor="let column of displayedColumns; let columnIndex = index">
            <input
              *ngIf="columnIndex <= searchOptions.length"
              type="text"
              [(ngModel)]="searchTerm"
              (input)="applyFilter()"
              placeholder="Search a Candidate"
              class="search-input"
            />
          
          </ng-container>
          <button mat-icon-button (click)="addSearchOption()">
            <mat-icon>+</mat-icon>
          </button>
        </div>
      </div>
      
     
     
      
    </div> -->
    <nz-table #filterTable [nzData]="listOfData" nzTableLayout="fixed">
      <thead>
        <tr>
          <th
            *ngFor="let column of listOfColumns; trackBy: trackByName"
            [(nzSortOrder)]="column.sortOrder"
            [nzSortFn]="column.sortFn"
            [nzFilters]="column.listOfFilter"
            [nzFilterFn]="column.filterFn"
          >
            {{ column.name }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of filterTable.data">
          <td>{{ data.name }}</td>
          <td>{{ data.age }}</td>
          <td>{{ data.address }}</td>
        </tr>
      </tbody>
    </nz-table>
    
    
    <table mat-table [dataSource]="filteredData">
      <ng-container matColumnDef="{{ column }}" *ngFor="let column of displayedColumns; let i = index"
            class="cl{{ i }}" [class.hide-column]="hideColumnHeaders || hideColumns[i]">
            <th mat-header-cell *matHeaderCellDef 
            [hidden]="hideColumnHeaders || hideColumns[i]">
            {{ convertToTitleCase(column) }}
          </th>
          <!-- <td mat-cell *matCellDef="let element" class="cl{{ i }}" 
          [hidden]="hideColumnHeaders || hideColumns[i]" [ngSwitch]="column">
          <ng-container *ngIf="column !== 'Email'; else emailColumn">
            {{ element[column] }}
          </ng-container>
          <ng-template #emailColumn>
            <a href="mailto:{{ element.geminiEmail }}" style="margin-left:150px">
              <img
              
              src="assets/employees/email_icon.png"
              (mouseenter)="element.isHovered = true"
              (mouseleave)="element.isHovered = false"
              (click)="copyEmail(element[column])"
              [matTooltip]="element[column]" 
            >
            
            </a>
          </ng-template>
        </td> -->
        <td mat-cell *matCellDef="let element" class="cl{{ i }}" 
        [hidden]="hideColumnHeaders || hideColumns[i]" [ngSwitch]="column">
      <ng-container *ngIf="column !== 'Email'; else emailColumn">
        
          {{ element[column] }}
        
      </ng-container>
      <ng-template #emailColumn>
        
        <div class="icon-container">
          <span class="email-cell">
          
            {{ element.Email }}
          
        </span>
          <a href="mailto:{{ element.geminiEmail }}" >
            <img
              src="assets/employees/email_icon.png" 
              
              class="email-icon-img"
               (click)="copyEmail(element[column])"
               style="margin-left:-80px;"
               matTooltip="Open Outlook"
            >
          </a>
          
          <svg xmlns="http://www.w3.org/2000/svg" (click)="copy(element[column])" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16" style="margin-left:-70px;cursor:pointer" matTooltip="copy" >
            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
          </svg>
          </div>

        
      </ng-template>
    </td>
    

      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize" [pageIndex]="pageIndex" [length]="totalItems" (page)="onPageChange($event)" showFirstLastButtons>
    </mat-paginator>
    
  </div>
</div>  

