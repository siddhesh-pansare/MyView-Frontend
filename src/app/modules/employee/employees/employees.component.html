
<div class="page-sub-header">
    <div class="page-heading">
    <img class="arrow-back-icon" alt="" src="assets/employees/Arrow back.svg">
    <div class="page-heading1">All Employees</div>
    </div>
    <div class="line"></div>
    <img class="btn-all-employees-icon" alt="" src="assets/employees/btn_all_employees.png">
</div>

<div class="parent-container">
<div class="container">
  <div class="row align-items-center">
    <div class="col-sm-6">
      <div class="searchCandidate">
        <div class="search-container">
          <input
            type="text"
            [(ngModel)]="searchTerm"
            (input)="applyFilter()"
            placeholder="Search a Candidate"
            class="search-input"
          />
        </div>

        <img class="icon" alt="" src="assets/employees/3077325 1.png">
        
      </div>
      <mat-select class="form-select custom-dropdown d-flex flex-column align-items-center" [placeholder]="'Headers'"
    [multiple]="false">

    <span class="column-name" (click)="toggleAllColumnVisibility()">
      <mat-option>
        <label class="checkbox-label">
          <input class="form-check-input me-2" type="checkbox" [checked]="areAllColumnsVisible()"
            (change)="toggleAllColumnVisibility()" />

          <span class="checkmark"></span>
          Select All
        </label>
      </mat-option>
    </span>

    <mat-selection-list (click)="$event.stopPropagation()"
      *ngFor="let column of displayedColumns; let i = index">
      <span class="column-name" (click)="toggleColumnVisibility(i)">
        <mat-option>
          <label class="checkbox-label">
            <input class="form-check-input me-2" type="checkbox"
              [checked]="initiallyCheckedColumns.includes(column)" (change)="toggleColumnVisibility(i)" />
            <span class="checkmark"></span>
            {{ convertToTitleCase(column) }}
          </label>
        </mat-option>
      </span>
    </mat-selection-list>

  </mat-select>
  
  
  
  <span class="selected-columns d-flex align-items-center">{{ checkedColumnsCount }} of {{ displayedColumns.length
  }} columns
  selected</span>

    </div>
    
    
   

    <div class="col-sm-6 text-right">
      <div class="filterExport">
       <a href="#"><img class="icon1" alt="" src="assets/employees/export1.png" (click)="exportToExcel()"></a>
       <div class="filter-columns">
        
        <a  (click)="toggleSearchInput()">
          <img class="icon2" alt="" src="assets/employees/566737 1.png">
        </a>
      </div>
      
       
      
      </div>
    </div>
  </div>
</div>
<div class="line-div-container">
<div class="line-div">
</div>
</div>

  



  <div class="table-responsive rounded">
  
    
    <div class="searchCandidate" *ngIf="showSearchInput">
      <div class="search-container">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (input)="applyFilter()"
          placeholder="Search a Candidate"
          class="search-input"
        />
      </div>
      <img class="icon" alt="" src="assets/employees/3077325 1.png">
    </div>
    
    <div class="search-options" *ngIf="showSearchInput">
      <div *ngFor="let option of searchOptions; let rowIndex = index" class="search-option">
        <ng-container *ngFor="let column of displayedColumns">
          <input type="text" [(ngModel)]="option[column]" class="search-option-input">
        </ng-container>
        <mat-icon (click)="removeSearchOption(rowIndex)">close</mat-icon>
      </div>
      <button mat-icon-button (click)="addSearchOption()">
        <mat-icon>note_add</mat-icon>
      </button>
    </div>
    
    
    <table mat-table [dataSource]="filteredData">
      <ng-container matColumnDef="{{ column }}" *ngFor="let column of displayedColumns; let i = index"
            class="cl{{ i }}" [class.hide-column]="hideColumnHeaders || hideColumns[i]">
            <th mat-header-cell *matHeaderCellDef 
            [hidden]="hideColumnHeaders || hideColumns[i]">
            {{ convertToTitleCase(column) }}
          </th>
          <td mat-cell *matCellDef="let element" class="cl{{ i }}" 
          [hidden]="hideColumnHeaders || hideColumns[i]" [ngSwitch]="column">
          <ng-container *ngIf="column !== 'Email'; else emailColumn">
            {{ element[column] }}
          </ng-container>
          <ng-template #emailColumn>
            <a href="mailto:{{ element.geminiEmail }}" >
              <img
              
              src="assets/employees/email_icon.png"
              (mouseenter)="element.isHovered = true"
              (mouseleave)="element.isHovered = false"
              (click)="copyEmail(element[column])"
              [matTooltip]="element[column]" 
            >
            
            </a>
          </ng-template>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize" [pageIndex]="pageIndex" [length]="totalItems" (page)="onPageChange($event)" showFirstLastButtons>
    </mat-paginator>
    
  </div>
</div>  

